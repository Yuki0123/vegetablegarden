{% extends 'base.html' %}
{% load tags %}

{% block content %}
<div>
{% regroup growingcrop_list by area as area_list %}
{% for area in area_list %}
<p class="title is-4">{{ area.grouper }}</p>
{% for growingcrop in area.list %}
{% if forloop.counter|modulo:4 == 1 %}<div class="tile is-ancestor">{% endif %}
    <div class="tile is-parent">
        <article class="tile is-child uk-card uk-card-default uk-card-body uk-width-1-2@m">
            <a href="{% url 'vegetablegarden:cropmanagement_list' growingcrop.pk %}">
                <p class="title is-6">{{growingcrop.vegetable.icon|safe}}{{growingcrop.vegetable}}</p>
            <p class="subtitle is-7">{{growingcrop.variety|default:""}}</p>
            <p class="subtitle is-7">
                {% if growingcrop.seeding_date %}播種日 {{growingcrop.seeding_date|date:"Y-m-d"}} <br>{% endif %}
                {% if growingcrop.planting_date %}植付日 {{growingcrop.planting_date|date:"Y-m-d"}} <br>{% endif %}
                {% if growingcrop.transplanting_date %}移植日 {{growingcrop.transplanting_date|date:"Y-m-d"}} <br>{% endif %}
                {% if growingcrop.harvest_date_start %}収穫開始日 {{growingcrop.harvest_date_start|date:"Y-m-d"}} <br>{% endif %}
                {% if growingcrop.harvest_date_end %}最終収穫日 {{growingcrop.harvest_date_end|date:"Y-m-d"}} <br>{% endif %}
            </p>
            </a>
            <a href="{% url 'vegetablegarden:growingcrop_update' growingcrop.pk %}">
                <button class="button is-small">
                <i class="fa-solid fa-pen"></i></button></a>
            <a href="{% url 'vegetablegarden:growingcrop_delete' growingcrop.pk %}">
                <button class="button is-small">
                <i class="fa-solid fa-xmark"></i></button></a>
        </article>
    </div>
    {% if forloop.counter|modulo:4 == 0 %}
        </div>
    {% elif forloop.last %}
        </div>
    {% endif %}
{% endfor %}
{% endfor %}
</div>

{% regroup growingcrop_list by area as area_list %}
{% for area in area_list %}
<p class="title is-4">{{ area.grouper }}</p>

{% for growingcrop in area.list %}
    {% if forloop.counter|modulo:4 == 1 %}<div class="uk-child-width-expand@s" uk-grid>{% endif %}
    <div>
    <div class="uk-card uk-card-default ">
        <a href="{% url 'vegetablegarden:cropmanagement_list' growingcrop.pk %}">
        <div class="uk-card-header uk-text-center">
            <p class="title is-6">{{growingcrop.vegetable.icon|safe}}{{growingcrop.vegetable}}</p>
        </div>
        </a>
        <div class="uk-card-body">
            <p class="uk-text-small">{{growingcrop.variety|default:""}}</p>
            <p class="uk-text-small">
            {% if growingcrop.seeding_date %}播種日 {{growingcrop.seeding_date|date:"Y-m-d"}} <br>{% endif %}
            {% if growingcrop.planting_date %}植付日 {{growingcrop.planting_date|date:"Y-m-d"}} <br>{% endif %}
            {% if growingcrop.transplanting_date %}移植日 {{growingcrop.transplanting_date|date:"Y-m-d"}} <br>{% endif %}
            {% if growingcrop.harvest_date_start %}収穫開始日 {{growingcrop.harvest_date_start|date:"Y-m-d"}} <br>{% endif %}
            {% if growingcrop.harvest_date_end %}最終収穫日 {{growingcrop.harvest_date_end|date:"Y-m-d"}} <br>{% endif %}
            </p>
        </div>

        <div class="uk-card-footer uk-text-center">
            <a href="{% url 'vegetablegarden:growingcrop_update' growingcrop.pk %}">
                <button class="button is-small">
                <i class="fa-solid fa-pen"></i></button></a>
            <a href="{% url 'vegetablegarden:growingcrop_delete' growingcrop.pk %}">
                <button class="button is-small">
                <i class="fa-solid fa-xmark"></i></button></a>
        </div>
    </div>
    </div>
    {% if forloop.counter|modulo:4 == 0 %}
        </div>
    {% elif forloop.last %}
        </div>
    {% endif %}

{% endfor %}
{% endfor %}


{% endblock %}